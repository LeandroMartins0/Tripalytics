from app.database.session import SessionLocal
from app.database.models import RequestCounter

# Função para incrementar o contador de solicitações para um endpoint específico
def increment_request_count(endpoint_name):
    with SessionLocal() as session:
        RequestCounter.increment_request_count(session, endpoint_name)

# Função para obter o contador de solicitações para um endpoint específico
def get_request_count(endpoint_name):
    with SessionLocal() as session:
        return RequestCounter.get_request_count(session, endpoint_name)

# Teste de incrementação do contador
endpoint_name = "TestEndpoint"
print(f"Incrementando contador para {endpoint_name}")
increment_request_count(endpoint_name)

# Teste de obtenção do contador
request_count = get_request_count(endpoint_name)
print(f"Contador para {endpoint_name}: {request_count}")
